import{r as e,W as C,C as w,j as s,l as P,_ as a,b as j}from"./index-DC2egkta.js";import{u as v}from"./useQuery-sj7xysb9.js";import{P as T}from"./ProductItem-DAM-ITeL.js";function S(){const{wishList:i,removeItem:c,addtoWashList:d}=e.useContext(C),{addProductToCart:l}=e.useContext(w),[u,n]=e.useState(!1),[f,m]=e.useState(null);e.useState(i);function g(){return j.get("https://ecommerce.routemisr.com/api/v1/products")}const{data:o,isError:x,error:W,isLoading:h,isFetching:b}=v({queryKey:["recentProducts"],queryFn:g});if(h)return s.jsx(P,{});if(x)return s.jsx("div",{className:"text-center text-red-500 text-2xl mt-10",children:s.jsx("p",{children:"Something went wrong"})});async function y(t){n(!0),m(t);try{let r=await l(t);r&&r.status===200?a.success(r.data.message,{style:{background:"#22d210",color:"#fff"}}):r.response.data.message=="Invalid Token. please login again"&&a.error("Login First To Add Product To Cart",{style:{background:"#f15757",color:"#fff"}})}catch{console.log("error","=",err.data),a.error("An error occurred while adding product to cart. Please try again later.",{style:{background:"#f15757",color:"#fff"}})}finally{n(!1)}}function L(t){console.log(t),d(t)}function p(t){console.log(t),c(t)}return s.jsx("div",{className:"row mt-10 mt-16",children:o==null?void 0:o.data.data.map(t=>s.jsx(T,{product:t,loading:u,cruntid:f,addToCart:y,AddWishList:()=>L(t.id),removewashList:()=>p(t.id)},t.id))})}export{S as R};
