import{r as s,U as h,u as m,j as l,l as v,w as x,b as k}from"./index-Mu4wSMnX.js";function y(c){const{setuserlogin:r}=s.useContext(h),e=m(),[u,t]=s.useState(null),[f,a]=s.useState(!0);return s.useEffect(()=>{const n=localStorage.getItem("userToken");async function g(){var i;if(!n){t(!1),a(!1),e("/freshcart/login");return}const d={token:n};try{(await k.get("https://ecommerce.routemisr.com/api/v1/auth/verifyToken",{headers:d})).data.message==="verified"?(console.log("Your Token Is Real"),t(!0)):(console.log("Invalid Token, redirecting to login"),t(!1),e("/freshcart/login"))}catch(o){console.error("Error verifying token:",((i=o.response)==null?void 0:i.data)||o.message),t(!1),localStorage.removeItem("userToken"),r(null),e("/freshcart/login")}finally{a(!1)}}g()},[e,r]),f?l.jsx(v,{}):u?c.children:l.jsx(x,{to:"/freshcart/login"})}export{y as default};
