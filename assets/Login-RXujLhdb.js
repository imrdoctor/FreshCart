import{r as t,U as m,u as d,j as e,L as g,b as f,_ as l}from"./index-mT-JiCU3.js";import{u as b}from"./formik.esm-CYHZiL3L.js";function h(){const{setuserlogin:i}=t.useContext(m),u=d(),[a,n]=t.useState(!1),c=async o=>{try{const{data:r}=await f.post("https://ecommerce.routemisr.com/api/v1/auth/signin",o);console.log(r),r.message==="success"?(localStorage.setItem("userToken",r.token),window.location.reload(),localStorage.setItem("userEmail",r.user.email),localStorage.setItem("UserName",r.user.name),l.success("Login successful!",{style:{background:"#22d210",color:"#fff"}}),n(!0),i(r.user),u("/freshcart/home")):l.error(error.response.data.message||"Login failed.")}catch(r){console.error("Error during login:",r),r.response.data.message=="fail"?l.error("Fill in all the fields",{style:{background:"#f15757",color:"#fff"}}):l.error(r.response.data.message,{style:{background:"#f15757",color:"#fff"}})}};t.useEffect(()=>{let o;return a&&(o=setTimeout(()=>{n(!1)},4e3)),()=>clearTimeout(o)},[a]);const s=b({initialValues:{email:"",password:""},onSubmit:c});return e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("form",{onSubmit:s.handleSubmit,className:"bg-glass p-8 shadow-lg rounded-lg w-full max-w-md",children:[e.jsx("p",{className:"text-center font-bold text-blue-800",children:"Login"}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900",children:"Your email"}),e.jsx("input",{name:"email",type:"email",id:"email",onBlur:s.handleBlur,onChange:s.handleChange,value:s.values.email,className:"bg-gray-50 border w-full border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",placeholder:"name@flowbite.com"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900",children:"Your password"}),e.jsx("input",{name:"password",type:"password",id:"password",onBlur:s.handleBlur,onChange:s.handleChange,value:s.values.password,className:"bg-gray-50 border w-full border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",placeholder:"password"}),s.touched.password&&s.errors.password?e.jsxs("div",{className:"mb-4 text-sm text-red-800",children:[e.jsx("span",{className:"font-medium",children:"Error:"})," ",s.errors.password]}):null]}),e.jsxs("button",{disabled:a,type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full px-5 py-2.5",children:[a?e.jsx("i",{className:"fa fa-spinner fa-spin"}):null," Login"]}),e.jsx("div",{className:"resetPass",children:e.jsx(g,{to:"/freshcart/ResetPassword",className:"text-blue-600 hover:text-blue-800 transition ",children:e.jsx("p",{children:"Forget Password ? Reset Now"})})})]})})}export{h as default};
