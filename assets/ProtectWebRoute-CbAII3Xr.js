import{r as s,U as h,u as m,j as c,v,b as x}from"./index-D1X4h8q3.js";function p(l){const{setuserlogin:r}=s.useContext(h),e=m(),[u,t]=s.useState(null),[f,a]=s.useState(!0);return s.useEffect(()=>{const n=localStorage.getItem("userToken");async function g(){var i;if(!n){t(!1),a(!1),e("/freshcart/login");return}const d={token:n};try{(await x.get("https://ecommerce.routemisr.com/api/v1/auth/verifyToken",{headers:d})).data.message==="verified"?(console.log("Your Token Is Real"),t(!0)):(console.log("Invalid Token, redirecting to login"),t(!1),e("/freshcart/login"))}catch(o){console.error("Error verifying token:",((i=o.response)==null?void 0:i.data)||o.message),t(!1),localStorage.removeItem("userToken"),r(null),e("/freshcart/login")}finally{a(!1)}}g()},[e,r]),f?c.jsx("div",{children:"Loading..."}):u?l.children:c.jsx(v,{to:"/freshcart/login"})}export{p as default};
